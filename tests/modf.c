#include "testconfig.h"
#define TEST_FUNC_F_FFP __MATH_PRECNAME(modf)
#include "testdriver.h"


static test_f_ffp_data const modf_data[] = {
	{ __LINE__, ZERO_P, ZERO_P, ZERO_P, 0 },
	{ __LINE__, ZERO_M, ZERO_M, ZERO_M, FLAG_FAIL_ARANYM2 },
	{ __LINE__, INF_P, ZERO_P, INF_P, NO_INEXACT_EXCEPTION|FLAG_FAIL_ARANYM },
	{ __LINE__, INF_M, ZERO_M, INF_M, NO_INEXACT_EXCEPTION|FLAG_FAIL_ARANYM },
	{ __LINE__, QNAN_P, QNAN_P, QNAN_P, NO_INEXACT_EXCEPTION|FLAG_XFAIL },

	{ __LINE__, HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.000000e+00, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(1.000000e+00, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.000000e+00, 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(2.000000e+00, 0x4000, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(4.000000e+00, 0x4001, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(4.000000e+00, 0x4001, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(8.000000e+00, 0x4002, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(8.000000e+00, 0x4002, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.560000e+02, 0x4007, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(2.560000e+02, 0x4007, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(3.276800e+04, 0x400e, 0x80000000L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(3.276800e+04, 0x400e, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-1.000000e+00, 0xbfff, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-1.000000e+00, 0xbfff, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-2.000000e+00, 0xc000, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-2.000000e+00, 0xc000, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-4.000000e+00, 0xc001, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-4.000000e+00, 0xc001, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-8.000000e+00, 0xc002, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-8.000000e+00, 0xc002, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-2.560000e+02, 0xc007, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-2.560000e+02, 0xc007, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-3.276800e+04, 0xc00e, 0x80000000L, 0x00000000L), ZERO_M, HEXCONSTE(-3.276800e+04, 0xc00e, 0x80000000L, 0x00000000L), FLAG_FAIL_ARANYM2 },
#ifdef TEST_LDOUBLE
	{ __LINE__, HEXCONSTE(1.234500e+00, 0x3fff, 0x9e041893L, 0x74bc6a7fL), HEXCONSTE(2.345000e-01, 0x3ffc, 0xf020c49bL, 0xa5e353f8L), HEXCONSTE(1.000000e+00, 0x3fff, 0x80000000L, 0x00000000L), 0 },
#endif
	{ __LINE__, HEXCONSTE(1.234500e+10, 0x4020, 0xb7f47010L, 0x00000000L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(1.234500e+10, 0x4020, 0xb7f47010L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(3.456700e+20, 0x4043, 0x95e9144cL, 0x7eaa3800L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(3.456700e+20, 0x4043, 0x95e9144cL, 0x7eaa3800L), 0 },
	{ __LINE__, HEXCONSTE(3.456700e-05, 0x3ff0, 0x90fc089bL, 0xfd438487L), HEXCONSTE(3.456700e-05, 0x3ff0, 0x90fc089bL, 0xfd438487L), HEXCONSTE(0.000000e+00, 0x0000, 0x00000000L, 0x00000000L), 0 },
#ifdef TEST_LDOUBLE
	{ __LINE__, HEXCONSTE(-1.234500e+00, 0xbfff, 0x9e041893L, 0x74bc6a7fL), HEXCONSTE(-2.345000e-01, 0xbffc, 0xf020c49bL, 0xa5e353f8L), HEXCONSTE(-1.000000e+00, 0xbfff, 0x80000000L, 0x00000000L), 0 },
#endif
	{ __LINE__, HEXCONSTE(-1.234500e+10, 0xc020, 0xb7f47010L, 0x00000000L), ZERO_M, HEXCONSTE(-1.234500e+10, 0xc020, 0xb7f47010L, 0x00000000L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-3.456700e+20, 0xc043, 0x95e9144cL, 0x7eaa3800L), ZERO_M, HEXCONSTE(-3.456700e+20, 0xc043, 0x95e9144cL, 0x7eaa3800L), FLAG_FAIL_ARANYM2 },
	{ __LINE__, HEXCONSTE(-3.456700e-05, 0xbff0, 0x90fc089bL, 0xfd438487L), HEXCONSTE(-3.456700e-05, 0xbff0, 0x90fc089bL, 0xfd438487L), ZERO_M, FLAG_FAIL_ARANYM2 },
	
	{ __LINE__, HEXCONSTE(1.5, 0x3fff, 0xc0000000L, 0x00000000L), HEXCONSTE(0.5, 0x3ffe, 0x80000000L, 0x00000000L), HEXCONSTE(1, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.5, 0x4000, 0xa0000000L, 0x00000000L), HEXCONSTE(0.5, 0x3ffe, 0x80000000L, 0x00000000L), HEXCONSTE(2, 0x4000, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-2.5, 0xc000, 0xa0000000L, 0x00000000L), HEXCONSTE(-0.5, 0xbffe, 0x80000000L, 0x00000000L), HEXCONSTE(-2, 0xc000, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(20, 0x4003, 0xa0000000L, 0x00000000L), HEXCONSTE(0, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(20, 0x4003, 0xa0000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(21, 0x4003, 0xa8000000L, 0x00000000L), HEXCONSTE(0, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(21, 0x4003, 0xa8000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(89.5, 0x4005, 0xb3000000L, 0x00000000L), HEXCONSTE(0.5, 0x3ffe, 0x80000000L, 0x00000000L), HEXCONSTE(89, 0x4005, 0xb2000000L, 0x00000000L), 0 },
};


int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	test_init(argc, argv);
	
	status |= test_table_f_ffp(modf_data, ARRAY_SIZE(modf_data), __FILE__);
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}
