#include "testconfig.h"
#define TEST_FUNC_IF_F __MATH_PRECNAME(jn)
#include "testdriver.h"



static test_if_f_data const jn_data[] = {
	{ __LINE__, 0, QNAN_P, QNAN_P, 0 },
	{ __LINE__, 0, QNAN_M, QNAN_P, 0 },
	{ __LINE__, 0, SNAN_P, QNAN_P, 0 },
	{ __LINE__, 0, SNAN_M, QNAN_P, 0 },
	{ __LINE__, 0, INF_P, ZERO_P, 0 },
	{ __LINE__, 0, INF_M, ZERO_P, 0 },
	{ __LINE__, 0, ZERO_P, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, 0, ZERO_M, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, 0, SUBNORM_P, ZERO_P, FLAG_SUBNORM },
	{ __LINE__, 0, SUBNORM_M, ZERO_M, FLAG_SUBNORM },
	{ __LINE__, 0, MIN_P, ZERO_P, 0 },
	{ __LINE__, 0, MIN_M, ZERO_M, 0 },
	{ __LINE__, 0, MAX_P, MAX_P, 0 },
	{ __LINE__, 0, MAX_M, MAX_M, 0 },

	/* jn (0, x) == j0 (x)	*/
	{ __LINE__, 0, QNAN_P, QNAN_P, 0 },
	{ __LINE__, 0, INF_P, ZERO_P, 0 },
	{ __LINE__, 0, INF_M, ZERO_P, 0 },
	{ __LINE__, 0, ZERO_P, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, 0, ZERO_M, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), 0 },
#if defined(TEST_LDOUBLE) && LDBL_MAX_EXP >= 16384
	{ __LINE__, 0, HEXCONSTE(-1.0, 0xbfff, 0x80000000L, 0x00000000L), HEXCONSTE(0.765197686557966551449717526102663221L, 0x3ffe, 0xc3e3fedeL, 0xbdc77c1dL), 0 },
	{ __LINE__, 0, HEXCONSTE(0.125L, 0x3ffc, 0x80000000L, 0x00000000L), HEXCONSTE(0.996097563041985204620768999453174712L, 0x3ffe, 0xff003ff8L, 0xe3fffb73L), 0 },
	{ __LINE__, 0, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(0.864242275166648623555731103820923211L, 0x3ffe, 0xdd3efb53L, 0xa950c68fL), 0 },
	{ __LINE__, 0, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(0.765197686557966551449717526102663221L, 0x3ffe, 0xc3e3fedeL, 0xbdc77c1dL), 0 },
	{ __LINE__, 0, HEXCONSTE(1.5, 0x3fff, 0xc0000000L, 0x00000000L), HEXCONSTE(0.511827671735918128749051744283411720L, 0x3ffe, 0x83072367L, 0x4b28d6eaL), 0 },
	{ __LINE__, 0, HEXCONSTE(2.0, 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE(0.223890779141235668051827454649948626L, 0x3ffc, 0xe5439fd9L, 0x2677be47L), 0 },
	{ __LINE__, 0, HEXCONSTE(8.0, 0x4002, 0x80000000L, 0x00000000L), HEXCONSTE(0.171650807137553906090869407851972001L, 0x3ffc, 0xafc53aabL, 0xf3812962L), 0 },
	{ __LINE__, 0, HEXCONSTE(10.0, 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE(-0.245935764451348335197760862485328754L, 0xbffc, 0xfbd695c4L, 0xf0f29c19L), 0 },
	{ __LINE__, 0, HEXCONSTE(4.0, 0x4001, 0x80000000L, 0x00000000L), HEXCONSTE(-3.9714980986384737228659076845169804197562E-1L, 0xbffd, 0xcb573849L, 0xf4a7cb9aL), FLAG_INEXACT },
	{ __LINE__, 0, HEXCONSTE(-4.0, 0xc001, 0x80000000L, 0x00000000L), HEXCONSTE(-3.9714980986384737228659076845169804197562E-1L, 0xbffd, 0xcb573849L, 0xf4a7cb9aL), FLAG_INEXACT },
#endif

	/* jn (1, x) == j1 (x)	*/
	{ __LINE__, 1, QNAN_P, QNAN_P, 0 },
	{ __LINE__, 1, INF_P, ZERO_P, 0 },
#if 0 /* ZERO_P also ok */
	{ __LINE__, 1, INF_M, ZERO_M, 0 },
#endif
	{ __LINE__, 1, ZERO_P, ZERO_P, 0 },
	{ __LINE__, 1, ZERO_M, ZERO_M, FLAG_FAIL_ARANYM2 },
	{ __LINE__, 1, HEXCONSTE(-1.0, 0xbfff, 0x80000000L, 0x00000000L), HEXCONSTE(-0.440050585744933515959682203718914913L, 0xbffd, 0xe14e4f74L, 0xb863629bL), 0 },
	{ __LINE__, 1, HEXCONSTE(0.125L, 0x3ffc, 0x80000000L, 0x00000000L), HEXCONSTE(0.0623780091344946810942311355879361177L, 0x3ffa, 0xff801553L, 0x8e4fa438L), FLAG_INEXACT },
	{ __LINE__, 1, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(0.349243602174862192523281016426251335L, 0x3ffd, 0xb2d00eb3L, 0x5b45e3bcL), FLAG_INEXACT },
	{ __LINE__, 1, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(0.440050585744933515959682203718914913L, 0x3ffd, 0xe14e4f74L, 0xb863629bL), 0 },
	{ __LINE__, 1, HEXCONSTE(1.5, 0x3fff, 0xc0000000L, 0x00000000L), HEXCONSTE(0.557936507910099641990121213156089400L, 0x3ffe, 0x8ed4ed4eL, 0xb7e408abL), 0 },
	{ __LINE__, 1, HEXCONSTE(2.0, 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE(0.576724807756873387202448242269137087L, 0x3ffe, 0x93a43cacL, 0x1b8f7ed8L), FLAG_INEXACT },
	{ __LINE__, 1, HEXCONSTE(8.0, 0x4002, 0x80000000L, 0x00000000L), HEXCONSTE(0.234636346853914624381276651590454612L, 0x3ffc, 0xf04482b0L, 0xc30c16a5L), FLAG_INEXACT|FLAG_FAIL_ARANYM }, /* seems to be precision error */
	{ __LINE__, 1, HEXCONSTE(10.0, 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE(0.0434727461688614366697487680258592883L, 0x3ffa, 0xb2107a71L, 0x00488615L), FLAG_INEXACT|FLAG_FAIL_ARANYM }, /* seems to be precision error */

	/* jn (3, x)  */
	{ __LINE__, 3, QNAN_P, QNAN_P, 0 },
	{ __LINE__, 3, INF_P, ZERO_P, 0 },

	{ __LINE__, 3, HEXCONSTE(-1.0, 0xbfff, 0x80000000L, 0x00000000L), HEXCONSTE(-0.0195633539826684059189053216217515083L, 0xbff9, 0xa04353b1L, 0xc7bd1561L), FLAG_INEXACT },
	{ __LINE__, 3, ZERO_P, ZERO_P, 0 },
	{ __LINE__, 3, HEXCONSTE(0.125L, 0x3ffc, 0x80000000L, 0x00000000L), HEXCONSTE(0.406503832554912875023029337653442868e-4L, 0x3ff0, 0xaa800444L, 0x0797f972L), FLAG_INEXACT },
	{ __LINE__, 3, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(0.848438342327410884392755236884386804e-2L, 0x3ff8, 0x8b021555L, 0x1996c263L), FLAG_INEXACT },
	{ __LINE__, 3, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(0.0195633539826684059189053216217515083L, 0x3ff9, 0xa04353b1L, 0xc7bd1561L), FLAG_INEXACT },
	{ __LINE__, 3, HEXCONSTE(2.0, 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE(0.128943249474402051098793332969239835L, 0x3ffc, 0x8409b2feL, 0x214e7ed1L), FLAG_INEXACT },
	{ __LINE__, 3, HEXCONSTE(10.0, 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE(0.0583793793051868123429354784103409563L, 0x3ffa, 0xef1f374eL, 0x06602c7bL), FLAG_INEXACT|FLAG_FAIL_ARANYM }, /* seems to be precision error */

	/*	jn (10, x)	*/
	{ __LINE__, 10, QNAN_P, QNAN_P, 0 },
	{ __LINE__, 10, INF_P, ZERO_P, 0 },

	{ __LINE__, 10, HEXCONSTE(-1.0, 0xbfff, 0x80000000L, 0x00000000L), HEXCONSTE(0.263061512368745320699785368779050294e-9L, 0x3fdf, 0x909e9dd5L, 0x2794ac6dL), FLAG_INEXACT },
	{ __LINE__, 10, ZERO_P, ZERO_P, 0 },
	{ __LINE__, 10, HEXCONSTE(0.125L, 0x3ffc, 0x80000000L, 0x00000000L), HEXCONSTE(0.250543369809369890173993791865771547e-18L, 0x3fc1, 0x93e50b28L, 0x841a1b65L), FLAG_INEXACT },
	{ __LINE__, 10, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(0.149621713117596814698712483621682835e-10L, 0x3fdb, 0x839bd087L, 0xccdc8399L), FLAG_INEXACT },
	{ __LINE__, 10, HEXCONSTE(1.0, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(0.263061512368745320699785368779050294e-9L, 0x3fdf, 0x909e9dd5L, 0x2794ac6dL), FLAG_INEXACT },
	{ __LINE__, 10, HEXCONSTE(2.0, 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE(0.251538628271673670963516093751820639e-6L, 0x3fe9, 0x870b34b1L, 0x1b70d655L), FLAG_INEXACT },
	{ __LINE__, 10, HEXCONSTE(10.0, 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE(0.207486106633358857697278723518753428L, 0x3ffc, 0xd4773ce9L, 0x75657ccaL), FLAG_INEXACT2|FLAG_FAIL_ARANYM }, /* seems to be precision error */

	/* BZ #11589 .*/
	{ __LINE__, 2, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.43175480701968038399746111312430703L, 0x3ffd, 0xdd0ef750L, 0x14a49f9eL), FLAG_INEXACT|FLAG_FAIL_ARANYM },
	{ __LINE__, 3, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.19899990535769083404042146764530813L, 0x3ffc, 0xcbc6a195L, 0xac6b1a49L), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 4, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.647466661641779720084932282551219891E-1L, 0x3ffb, 0x8499e66dL, 0x99f4e87dL), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 5, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.163892432048058525099230549946147698E-1L, 0x3ff9, 0x8642bbf2L, 0x4440245dL), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 6, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.34048184720278336646673682895929161E-2L, 0x3ff6, 0xdf235ffcL, 0x760bbb65L), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 7, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.60068836573295394221291569249883076E-3L, 0x3ff4, 0x9d77838bL, 0x2c2e4f57L), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 8, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.92165786705344923232879022467054148E-4L, 0x3ff1, 0xc1492145L, 0x4d000160L), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, 9, HEXCONSTE(2.4048255576957729L, 0x4000, 0x99e8a974L, 0xb8da003fL), HEXCONSTE(0.12517270977961513005428966643852564E-4L, 0x3fee, 0xd20144fdL, 0x00b01a7fL), FLAG_INEXACT|FLAG_FAIL_SOFTFLOAT|FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },

	/* Bug 14155: spurious exception may occur.  */
	{ __LINE__, 2, HEXCONSTE(1.26764463115699505427e+30, 0x4062, 0xffffb100L, 0x00000000L), HEXCONSTE(-4.43860668048170034334926693188979974489e-16L, 0xbfcb, 0xffde45efL, 0x5192d053L), UNDERFLOW_EXCEPTION_OK|FLAG_INEXACT },
};


int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	test_init(argc, argv);
	
	status |= test_table_if_f(jn_data, ARRAY_SIZE(jn_data), __FILE__);
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}
