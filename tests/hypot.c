#include "testconfig.h"
#ifdef HAVE_HYPOT
#define TEST_FUNC_FF_F __MATH_PRECNAME(hypot)
#include "testdriver.h"


static test_ff_f_data const hypot_data[] = {
	/* If x or y is an infinity, positive infinity is returned. */
	{ __LINE__, INF_P, HEXCONSTE(1, 0x3fff, 0x80000000L, 0x00000000L), INF_P, 0 },
	{ __LINE__, INF_M, HEXCONSTE(1, 0x3fff, 0x80000000L, 0x00000000L), INF_P, 0 },

	{ __LINE__, INF_P, QNAN_P, INF_P, FLAG_FAIL_ARANYM }, /* inline hypot in math-68881.h does not handle INF */
	{ __LINE__, INF_M, QNAN_P, INF_P, FLAG_FAIL_ARANYM },
	{ __LINE__, QNAN_P, INF_P, INF_P, FLAG_FAIL_ARANYM },
	{ __LINE__, QNAN_P, INF_M, INF_P, FLAG_FAIL_ARANYM },

	/* If x or y is a NaN, and the other argument is not an infinity, a NaN is returned. */
	{ __LINE__, QNAN_P, QNAN_P, QNAN_P, 0 },
	{ __LINE__, ZERO_P, QNAN_P, QNAN_P, 0 },
	{ __LINE__, ZERO_M, QNAN_P, QNAN_P, 0 },
	{ __LINE__, QNAN_P, ZERO_P, QNAN_P, 0 },
	{ __LINE__, QNAN_P, ZERO_M, QNAN_P, 0 },
	{ __LINE__, HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), QNAN_P, QNAN_P, 0 },
	{ __LINE__, HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), QNAN_P, QNAN_P, 0 },
	{ __LINE__, QNAN_P, HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), QNAN_P, 0 },
	{ __LINE__, QNAN_P, HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), QNAN_P, 0 },

	/* hypot (x,y) == hypot (+-x, +-y)	*/
	{ __LINE__, HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.4L, 0x4002, 0xc6666666L, 0x66666666L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.4L, 0x4002, 0xc6666666L, 0x66666666L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), HEXCONSTE(-12.4L, 0xc002, 0xc6666666L, 0x66666666L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), HEXCONSTE(-12.4L, 0xc002, 0xc6666666L, 0x66666666L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(12.4L, 0x4002, 0xc6666666L, 0x66666666L), HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(-12.4L, 0xc002, 0xc6666666L, 0x66666666L), HEXCONSTE(0.7L, 0x3ffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(12.4L, 0x4002, 0xc6666666L, 0x66666666L), HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },
	{ __LINE__, HEXCONSTE(-12.4L, 0xc002, 0xc6666666L, 0x66666666L), HEXCONSTE(-0.7L, 0xbffe, 0xb3333333L, 0x33333333L), HEXCONSTE(12.419742348374220601176836866763271L, 0x4002, 0xc6b743c0L, 0xb0375cd1L), 0 },

	/*	hypot (x,0) == fabs (x)  */
	{ __LINE__, HEXCONSTE(HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), 0x3ffe, 0xc0000000L, 0x00000000L), ZERO_P, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(HEXCONSTE(-0.75L, 0xbffe, 0xc0000000L, 0x00000000L), 0xbffe, 0xc0000000L, 0x00000000L), ZERO_P, HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(HEXCONSTE(-5.7e7, 0xc018, 0xd9701000L, 0x00000000L), 0xc018, 0xd9701000L, 0x00000000L), ZERO_P, HEXCONSTE(5.7e7L, 0x4018, 0xd9701000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(HEXCONSTE(0.75L, 0x3ffe, 0xc0000000L, 0x00000000L), 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(1.25L, 0x3fff, 0xa0000000L, 0x00000000L), HEXCONSTE(1.45773797371132511771853821938639577L, 0x3fff, 0xba97286dL, 0x9d1d0d8eL), FLAG_INEXACT },

	{ __LINE__, HEXCONSTE(1.0L, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(4.33680868994201773603e-19, 0x3fc2, 0x80000000L, 0x00000000L), HEXCONSTE(1.0L, 0x3fff, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.0L, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(2.84690038089772755836e-39, 0x3f7e, 0xf8000000L, 0x00000000L), HEXCONSTE(1.00000000000000000000e+00, 0x3fff, 0x80000000L, 0x00000000L), 0 },

#if !defined(TEST_FLOAT)
	{ __LINE__, HEXCONSTE(1.27605887595351923799e+38, 0x407d, 0xc0000000L, 0x00000000L), HEXCONSTE(1.70141183460469231732e+38, 0x407e, 0x80000000L, 0x00000000L), HEXCONSTE(2.12676479325586539665e+38, 0x407e, 0xa0000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.33745124252463186320e-38, 0x3f81, 0x91a2b300L, 0x00000000L), HEXCONSTE(1.33745124252463186320e-38, 0x3f81, 0x91a2b300L, 0x00000000L), HEXCONSTE(1.891441686191081936598531534017449451173e-38L, 0x3f81, 0xcdf5b2e9L, 0x9af0dac2L), UNDERFLOW_EXCEPTION_OK },
#endif

#if defined(TEST_DOUBLE)
	{ __LINE__, HEXCONSTE(6.74134925573368465398e+307, 0x43fd, 0xc0000000L, 0x00000000L), HEXCONSTE(8.98846567431157953865e+307, 0x43fe, 0x80000000L, 0x00000000L), HEXCONSTE(1.12355820928894744233e+308, 0x43fe, 0xa0000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.00000000000000000000e+00, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(5.38885075107212834967e-309, 0x3bfe, 0xf8000000L, 0x00000000L), HEXCONSTE(1.00000000000000000000e+00, 0x3fff, 0x80000000L, 0x00000000L), 0 },
#endif

#if defined(TEST_LDOUBLE) && LDBL_MAX_EXP >= 16384
	{ __LINE__, HEXCONSTE(4.46149310758961911907e+4931, 0x7ffd, 0xc0000000L, 0x00000000L), HEXCONSTE(5.94865747678615882543e+4931, 0x7ffe, 0x80000000L, 0x00000000L), HEXCONSTE(7.43582184598269853179e+4931, 0x7ffe, 0xa0000000L, 0x00000000L), 0 },
#endif

	{ __LINE__, HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE(1.9817352931807469938024533350782879785095e-45L, 0x3f6a, 0xb504f333L, 0xf9de6484L), UNDERFLOW_EXCEPTION_FLOAT|FLAG_INEXACT },

#ifndef TEST_FLOAT
	{ __LINE__, HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE(6.9871433705131320800651344656990806305791e-324L, 0x3bcd, 0xb504f333L, 0xf9de6484L), UNDERFLOW_EXCEPTION_DOUBLE },
#endif

#if defined TEST_LDOUBLE && LDBL_MIN_EXP <= -16381
	{ __LINE__, HEXCONSTE(3.64519953188247460253e-4951, 0x0000, 0x00000000L, 0x00000001L), HEXCONSTE(3.64519953188247460253e-4951, 0x0000, 0x00000000L, 0x00000001L), HEXCONSTE(5.1550906155442528702558159159596215039925e-4951L, 0x0000, 0x00000000L, 0x00000001L), UNDERFLOW_EXCEPTION },
#endif
};


int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	test_init(argc, argv);
	
	status |= test_table_ff_f(hypot_data, ARRAY_SIZE(hypot_data), __FILE__);
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}

#else

int main(void)
{
	return 77;
}

#endif
