#include "testconfig.h"
#ifdef HAVE_LOGB
#define TEST_FUNC_F_F __MATH_PRECNAME(logb)
#include "testdriver.h"



static test_f_f_data const logb_data[] = {
	{ __LINE__, ZERO_P, INF_M, FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, ZERO_M, INF_M, FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, HEXCONSTE(-1.0, 0xbfff, 0x80000000L, 0x00000000L), ZERO_P, 0 },
	{ __LINE__, MIN_M, QNAN_P, FLAG_MINVAL },
#if defined (TEST_LDOUBLE) && LDBL_MAX_EXP == 16384
	{ __LINE__, MAX_M, HEXCONSTE(16383, 0x400c, 0xfffc0000L, 0x00000000L), 0 },
#endif
#if defined (TEST_DOUBLE) && DBL_MAX_EXP == 1024
	{ __LINE__, HEXCONSTE(1.79769313486231570815e+308L, 0x43fe, 0xffffffffL, 0xfffff800L), HEXCONSTE(1023, 0x4008, 0xffc00000L, 0x00000000L), 0 },
#endif
#if defined (TEST_LDOUBLE) && __LDBL_MIN_EXP__ <= (-16382)
	{ __LINE__, SUBNORM_P, HEXCONSTE(-16446, 0xc00d, 0x807c0000L, 0x00000000L), FLAG_SUBNORM|FLAG_INEXACT },
#endif
#if defined (TEST_LDOUBLE) && __LDBL_MIN_EXP__ <= (-16381)
	{ __LINE__, SUBNORM_P, HEXCONSTE(-16445, 0xc00d, 0x807a0000L, 0x00000000L), FLAG_SUBNORM|FLAG_INEXACT },
#endif
	{ __LINE__, SUBNORM_M, QNAN_P, FLAG_SUBNORM },
	{ __LINE__, INF_P, INF_P, FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, INF_M, INF_P, FLAG_FAIL_HARDFLOAT|FLAG_FAIL_ARANYM },
	{ __LINE__, QNAN_P, QNAN_P, FLAG_FAIL_ARANYM },
	{ __LINE__, QNAN_M, QNAN_P, FLAG_FAIL_ARANYM },
	{ __LINE__, SNAN_P, QNAN_P, FLAG_FAIL_ARANYM },
	{ __LINE__, SNAN_M, QNAN_P, FLAG_FAIL_ARANYM },

	{ __LINE__, HEXCONSTE(1, 0x3fff, 0x80000000L, 0x00000000L), ZERO_P, NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONST_E, HEXCONSTE(1, 0x3fff, 0x80000000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(1024, 0x4009, 0x80000000L, 0x00000000L), HEXCONSTE(10, 0x4002, 0xa0000000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(-2000, 0xc009, 0xfa000000L, 0x00000000L), HEXCONSTE(10, 0x4002, 0xa0000000L, 0x00000000L), NO_INEXACT_EXCEPTION },

	{ __LINE__, HEXCONSTE(3.67341984631964846240e-40, 0x3f7c, 0x80000000L, 0x00000000L), HEXCONSTE(-131, 0xc006, 0x83000000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(2.29588740394978028900e-41, 0x3f78, 0x80000000L, 0x00000000L), HEXCONSTE(-135, 0xc006, 0x87000000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(2.43938036669664155706e-41, 0x3f78, 0x88000000L, 0x00000000L), HEXCONSTE(-135, 0xc006, 0x87000000L, 0x00000000L), NO_INEXACT_EXCEPTION },
#ifndef TEST_FLOAT
	{ __LINE__, HEXCONSTE(1.11253692925360069155e-308, 0x3c00, 0x80000000L, 0x00000000L), HEXCONSTE(-1023, 0xc008, 0xffc00000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(1.39067116156700086443e-309, 0x3bfd, 0x80000000L, 0x00000000L), HEXCONSTE(-1026, 0xc009, 0x80400000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(5.79304850933519342025e-312, 0x3bf5, 0x88800000L, 0x00000000L), HEXCONSTE(-1034, 0xc009, 0x81400000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(2.12199579096527231511e-314, 0x3bed, 0x80000000L, 0x00000000L), HEXCONSTE(-1042, 0xc009, 0x82400000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(2.25462052790060183481e-314, 0x3bed, 0x88000000L, 0x00000000L), HEXCONSTE(-1042, 0xc009, 0x82400000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE(-1074, 0xc009, 0x86400000L, 0x00000000L), NO_INEXACT_EXCEPTION },
#endif
#if defined TEST_LDOUBLE && LDBL_MIN_EXP - LDBL_MANT_DIG <= -16400
	{ __LINE__, HEXCONSTE(1.28254056667789211512e-4937, 0x0000, 0x00002000L, 0x00000000L), HEXCONSTE(-16400, 0xc00d, 0x80200000L, 0x00000000L), NO_INEXACT_EXCEPTION },
	{ __LINE__, HEXCONSTE(1.91113437217159884441e-4945, 0x0000, 0x00000000L, 0x00080000L), HEXCONSTE(-16426, 0xc00d, 0x80540000L, 0x00000000L), NO_INEXACT_EXCEPTION },
#endif
};


int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	test_init(argc, argv);
	
	status |= test_table_f_f(logb_data, ARRAY_SIZE(logb_data), __FILE__);
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}

#else

int main(void)
{
	return 77;
}

#endif
